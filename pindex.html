<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  
<title>gift-card</title>

<link rel="stylesheet" type="text/css" href="./index.css">

<script src='build/pdfmake.min.js'></script>
  <script src='build/vfs_fonts.js'></script>
  
</head>

<body>

  <div class="container">
    <form method="POST" action="/submit">
    <p>Welcome to Butter Day Spa</p>
      <input type="text" 
             placeholder="RECIPIENT FIRST NAME"
             id="recipientFirstName" 
             name="recipientFirstName" 
             required 
           /> 
   
      <input type="text" 
             placeholder="BUYER FIRST NAME"
             id="buyerFirstName" 
             name="buyerFirstName" 
             required 
            />
    
      <input type="text" 
      placeholder="GIFT DISCRIPTION"
      id="giftDescription" 
      name="giftDescription" 
      required 
      class="form-input" />
   
      <select name='giftName' id='giftName' required class="form-select">
      <option value="Select Option">PLEASE SELECT AN OPTION</option>
      <option value="Swedish Massage">Swedish Massage</option>
      <option value="Deep Tissue Massage">Deep Tissue Massage</option>
      <option value="Europa Facial">Europa Facial</option>
      <option value="Couples Massage">Couples Massage</option>
      <option value="Twos Company Massage">Twos Company Massage</option>
      <option value="Symphony #5">Symphony #5</option>
      <option value="Never Never Land">Never Never Land</option>
      <option value="Duchess of Windsor">Duchess of Windsor</option>
      <option value="Mother-Daughter Retreat">Mother-Daughter Retreat</option>
      <option value="Make It a Double">Make It a Double</option>
      <option value="Queen of Hearts">Queen of Hearts</option>
      <option value="Take Two">Take Two</option>
      <option value="Bali Retreat">Bali Retreat</option>
      <option value="Daycation Symphony #5">Daycation Symphony #5</option>
      <option value="Daycation Bali Retreat">Daycation Bali Retreat</option>
      <option value="Forty Dollars">Forty Dollars ($40.00)</option>
      <option value="Fifty Dollars">Fifty Dollars ($50.00)</option>
      <option value="One Hundred Dollars">One Hundred Dollars ($100.00)</option>
      <option value="One Hundred-Fifty Dollars">One Hundred-Fifty Dollars ($150.00)</option>
      <option value="Two Hundred Dollars">Two Hundred Dollars ($200.00)</option>
      <option value="Spa Chi">Spa Chi</option>
      </select>
      
      <input
      type="text"
      placeholder="MESSAGE"
      name="message"
      id="message"
      required
      class="form-message"
    />
    <input
           type="text"
           placeholder="INITIALS"
           name="initials"
           id="initials"
           required
           class="form-input"
         />
         <input
         type="text"
         placeholder="VOUCHER"
         name="voucher"
         id="voucher"
         required
         class="form-input"
       />
       <input
           type="text"
           placeholder="COST CODE"
           name="costCode"
           id="costCode"
           required
           class="form-input"
         />
         <input
         type="text"
         placeholder="RECIPIENT LAST NAME"
         name="recipientLastName"
         id="recipientLastName"
         required
         class="form-input"
       />
       <input
       type="email"
       placeholder="RECIPIENT EMAIL ADDRESS"
       name="recipientEmail"
       id="recipientEmail"
       required
       class="form-input"
     />
     <input
     type="email"
     placeholder="BUYER EMAIL ADDRESS"
     name="buyerEmail"
     id="buyerEmail"
     required
     class="form-input"
   />
   
   <button onclick="generatePDF()">Generate PDF</button>
   
    </form>
    <div class="drops">
      <div class="drop drop-1"></div>
      <div class="drop drop-2"></div>
      <div class="drop drop-3"></div>
      <div class="drop drop-4"></div>
      <div class="drop drop-5"></div>
    </div>
   </div>

   <script>
    function generatePDF() {
      var recipientFirstName = document.getElementById('recipientFirstName').value;
      var recipientLastName = document.getElementById('recipientLastName').value;
      var buyerFirstName = document.getElementById('buyerFirstName').value;
      var giftName = document.getElementById('giftName').value;
      var initials = document.getElementById('initials').value;
      var voucher = document.getElementById('voucher').value;
      var costCode = document.getElementById('costCode').value;
      var message = document.getElementById('message').value;
  
      function generatePDF() {
        // Read the image file
        fs.readFile('Butter Day Spa.png', (err, imageBuffer) => {
          if (err) {
            console.error('Error reading image file:', err);
            res.status(500).send('Failed to generate PDF');
            return;
          }
  
          // Convert the image buffer to a base64 string
          const imageData = imageBuffer.toString('base64');
  
          // Create a document definition
          const docDefinition = {
            pageSize: 'LETTER',
            background: [
              {
                image: `data:image/png;base64,${imageData}`,
                width: 612,
              },
            ],
           content: [
              {
                text: `${recipientFirstName} ${recipientLastName}`,
                fontSize: 14,
                bold: false,
                margin: [0, 0, 0, 0],
                alignment: ' left',
                absolutePosition: { x: 115, y: 396 },
              },
              {
                text: `${buyerFirstName}`,
                fontSize: 14,
                bold: false,
                margin: [0, 0, 0, 0],
                alignment: 'left',
                absolutePosition: { x: 115, y: 418 },
              },
              {
                text: `${giftName}`,
                fontSize: 14,
                bold: false,
                margin: [0, 0, 0, 0],
                alignment: 'left',
                absolutePosition: { x: 115, y: 440 },
              },
              {
                text: `${initials}-${voucher}-${costCode}`,
                fontSize: 18,
                bold: false,
                margin: [0, 0, 0, 0],
                alignment: 'left',
                absolutePosition: { x: 435, y: 460 },
              },
              {
                text: `${message}`,
                fontSize: 14,
                bold: false,
                margin: [0, 0, 0, 15],
                alignment: 'left',
                absolutePosition: { x: 52, y: 463 },
              },
            ],
          };
  
          // Generate the PDF
          const pdfDoc = pdfMake.createPdf(docDefinition);
          pdfDoc.getBuffer((buffer) => {
            res.setHeader('Content-Type', 'application/pdf');
            res.setHeader('Content-Disposition', 'attachment; filename= Body Day Spa Gift Certificate');
            res.write(buffer);
            res.end();
          });
        });
      }
    }
  </script>
  

<script src="pindex.js"></script>

</body>
</html>